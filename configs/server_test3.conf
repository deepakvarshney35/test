<!--Run Config /home/ravi/office/Projects/svn/wipnew/ravi/ServicePlatform/conf/test4.conf t_2.f23,t_1.f13,t_3.f33  t_1.f11-->
<services>
	<driver name="certifications" type="mysql" host="127.0.0.1:3308" db="certification" password="Km7Iv80l" user="root" max-connection-pool-size="100" start-connection-pool-size="10">
		<data-store name="SCORECARD">
		 	<field name="TNSCID" type="INT"/>
			<field name="TSSID" type="INT"/>
			<field name="USERNAME" type="STRING"/>
			<field name="SUBSERVID" type="INT"/>
			<field name="SCORE" type="STRING"/>
			<field name="PERCENTAGE" type="INT"/>
			<field name="AVG_SCORE" type="INT"/>
			<field name="RESULT" type="STRING"/>
			<field name="COMPLETION_DT" type="STRING"/>
			<field name="PUBLISH_NAUK" type="STRING"/>
			<field name="PUBLISH_NAUK_DT" type="STRING"/>
			<field name="PUBLISH_FN" type="STRING"/>
			<field name="PUBLISH_FN_DT" type="STRING"/>
			<field name="FB_FETCHED" type="STRING"/>
			<field name="PR_FETCHED" type="STRING"/>
			<field name="JREP_FETCHED" type="STRING"/>
			<field name="CERT_FETCHED" type="STRING"/>
			<field name="CERT_SENT" type="STRING"/>
			<field name="MOD_TS" type="STRING"/>
			<forgein-key name="TSSID" refer="resbilling.TRANS_SUB_SERVICES.TSSID"/>
		</data-store>
		 <data-store name="PCNT_PCNTL_MAP">
                        <field name="SUBSERVID" type="INT"/>
                        <field name="TESTID" type="INT"/>
                        <field name="PERCENTAGE" type="INT"/>
                        <field name="PERCENTILE" type="INT"/>
                        <forgein-key name="SUBSERVID" refer="certifications.SCORECARD.SUBSERVID"/>
                        <forgein-key name="PERCENTAGE" refer="certifications.SCORECARD.PERCENTAGE"/>
                </data-store>

		 <data-store name="REPORTS">
                        <field name="TSSID" type="INT"/>
                        <field name="TNSCID" type="INT"/>
                        <field name="PROCTOR" type="BLOB"/>
                        <field name="CERTIFICATE" type="BLOB"/>
                        <field name="JOBREPORT" type="BLOB"/>
                        <field name="MOD_TS" type="STRING"/>
                        <forgein-key name="TSSID" refer="certifications.SCORECARD.TSSID"/>
                </data-store>


	</driver>
	<driver name="resbilling" type="mysql" host="127.0.0.1:3308" db="resbilling" password="Km7Iv80l" user="root" max-connection-pool-size="100" start-connection-pool-size="10">
		<data-store name="CLIENTS">
                        <field name="CLIENTID" type="INT"/>
                        <field name="USERNAME" type="STRING"/>
                        <field name="CUSTCODE" type="STRING"/>
                        <field name="NAME" type="STRING"/>
                        <field name="EMAIL" type="STRING"/>
                        <field name="CORPID" type="INT"/>
                        <field name="ENTRY_DATE" type="STRING"/>
                        <field name="PHONENUMBER" type="STRING"/>
                        <field name="SOURCE" type="STRING"/>
                        <field name="MOD_TS" type="STRING"/>
                        <key name="USERNAME" type="primary"/>
		</data-store>
		<data-store name="TRANSACTIONS">
                        <field name="TRANSID" type="INT"/>
                        <field name="OSID" type="INT"/>
                        <field name="TRANSCODE" type="STRING"/>
                        <field name="CLIENTID" type="INT"/>
                        <field name="DATE" type="STRING"/>
                        <field name="ENTRYBY" type="INT"/>
                        <field name="WALKINBY" type="INT"/>
			<field name="CITYID" type="INT"/>
			<field name="OCITY" type="STRING"/>
			<field name="SALETYPE" type="STRING"/>
			<field name="TRANSTYPE" type="STRING"/>
			<field name="OVERSEAS" type="STRING"/>
			<field name="CURRENCY" type="STRING"/>
			<field name="DUMMY" type="STRING"/>
			<field name="CORPCOLLECT" type="STRING"/>
			<field name="CORPID" type="INT"/>
			<field name="TRANSTATUS" type="STRING"/>
			<field name="ARAMEX_EXID" type="INT"/>
			<field name="ABID" type="INT"/>
			<field name="PAYMENT_ARAMEX" type="STRING"/>
			<field name="TOTAL_AMOUNT" type="STRING"/>
			<field name="DISCOUNT" type="STRING"/>
			<field name="DISC_REASON" type="STRING"/>
			<field name="COMMENTS" type="STRING"/>
			<field name="MOD_DATE" type="STRING"/>
			<field name="AWB_NO" type="STRING"/>
			<field name="ONLINE_PAY_STATUS" type="STRING"/>
			<field name="FAIL_ASSIGN_TO" type="INT"/>
			<field name="FAIL_ASSIGN_FROM" type="INT"/>
			<field name="ASSIGN_DATE" type="STRING"/>
			<field name="SOURCE" type="STRING"/>
			<field name="FOT_SRC" type="STRING"/>
			<field name="EASYBILL_ID" type="STRING"/>
			<field name="OLD_CLIENT" type="STRING"/>
			<forgein-key name="CLIENTID" refer="resbilling.CLIENTS.CLIENTID"/>
                </data-store>
		<data-store name="TRANS_SERVICES">
                        <field name="TSID" type="INT"/>
                        <field name="TRANSID" type="INT"/>
                        <field name="SERVICEID" type="INT"/>
                        <field name="ICVID" type="INT"/>
                        <field name="START_DATE" type="STRING"/>
                        <field name="EXPEND_DATE" type="STRING"/>
                        <field name="ACTUALEND_DATE" type="STRING"/>
                        <field name="SERVSTATUS" type="STRING"/>
                        <field name="STATUS_DATE" type="STRING"/>
                        <field name="STATUSBY" type="INT"/>
                        <field name="ASSIGNEDTO" type="INT"/>
                        <field name="PARENTSERVID" type="INT"/>
			<field name="SUBSCRIPTION" type="STRING"/>
			<field name="DRAFTSTART_DATE" type="STRING"/>
			<field name="SUBSCRIPTION_START" type="STRING"/>
			<field name="SUBSCRIPTION_END" type="STRING"/>
			<field name="COMMENT" type="STRING"/>
			<field name="RESDEV_REWORK" type="STRING"/>
			<field name="RESDEV_LEVEL" type="STRING"/>
			<field name="ALLOCATION_DATE" type="STRING"/>
			<field name="RESDEV_TSID" type="INT"/>
			<field name="APPROVED_BY" type="INT"/>
			<field name="AUTOAPPLY_STATUS" type="INT"/>
			<field name="MOD_TS" type="STRING"/>
	                <forgein-key name="TRANSID" refer="resbilling.TRANSACTIONS.TRANSID"/>
                </data-store>
		<data-store name="SUBSERVICE">
                        <field name="SUBSERVID" type="INT"/>
                        <field name="TESTID" type="INT"/>
                        <field name="SERVICEID" type="INT"/>
                        <field name="NAME" type="STRING"/>
                        <field name="SUBSERVICETYPE" type="STRING"/>
                        <field name="DESCRIPTION" type="STRING"/>
                        <field name="INR" type="STRING"/>
                        <field name="USD" type="STRING"/>
                        <field name="VALID" type="STRING"/>
                        <field name="CLIENT_DISPLAY" type="STRING"/>
                        <field name="ADMIN_DISPLAY" type="STRING"/>
                        <field name="MOD_DATE" type="STRING"/>
			<key name="TESTID" type="primary"/>
			<forgein-key name="SUBSERVID" refer="certifications.SCORECARD.SUBSERVID"/>
		</data-store>
		<data-store name="TRANS_SUB_SERVICES">
		 	<field name="TSSID" type="INT"/>
			<field name="TSID" type="INT"/>
			<field name="CUSTCODE" type="STRING"/>
			<field name="SUBSERVID" type="INT"/>
			<field name="NAME_FOR_CERT" type="STRING"/>
			<field name="DATE" type="STRING"/>
			<field name="SUBSERVSTATUS" type="STRING"/>
			<field name="SUBSCRIPTION" type="STRING"/>
			<field name="FRESHNESS" type="STRING"/>
			<field name="COMMENT" type="STRING"/>
			<field name="SESSION_TOKEN" type="STRING"/>
			<field name="MOD_TS" type="STRING"/>
			<forgein-key name="SUBSERVID" refer="resbilling.SUBSERVICE.SUBSERVID"/>
			<forgein-key name="TSID" refer="resbilling.TRANS_SERVICES.TSID"/>
		</data-store>
	</driver>
	
	<logger>/home/vikasa/ServicePlatform/Certification/current/etc/logger.properties</logger>
	<contracts>

		<!--
			Contract :     getUsernameForTests
			Query : SELECT DISTINCT(USERNAME) USERNAME FROM SCORECARD WHERE TSSID IN (tssids)
		-->

    <contract name="getUsernameForTests">
                        <parameter order="1" id="1" name="TSSID" type="INTARRAY"/>
                        <step type="select" order="1" >
                                 <select fields="certifications.SCORECARD.USERNAME "/>
                                <where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
                                <post-part data-store="certifications.SCORECARD" value=" group by USERNAME"/>
                        </step>
                </contract>

	    <!--
	      Contract : getPublishedTestDetailForSubServid
	      Query : select SCORE,USERNAME FROm SCORECARD where USERNAME=:userName  and SUBSERVID=:subservId
	    -->
	    <contract name="getPublishedTestDetailForSubServid">
	      <parameter order="1" id="1" name="USERNAME" type="STRING"/>
	      <parameter order="2" id="2" name="SUBSERVID" type="INT" />
	      <parameter order="3" id="3" name="PUBLISH_NAUK" type="STRING" value="Y"/>
	      <step type="select" order="1" >
		<select fields="certifications.SCORECARD.TSSID\,certifications.SCORECARD.SCORE"/>
		<where field="certifications.SCORECARD.USERNAME" parameter="USERNAME"/>
		<where field="certifications.SCORECARD.SUBSERVID" parameter="SUBSERVID"/>
		<where field="certifications.SCORECARD.PUBLISH_NAUK" parameter="PUBLISH_NAUK"/>
	      </step>
	    </contract>

	    <!--
	      Contract : getTestInfoCompletedOnDate
	     Query : SELECT TSSID, USERNAME, SCORE, PERCENTAGE, SUBSERVID, CERT_SENT FROM SCORECARD WHERE COMPLETION_DT = :date;
	    -->
	    <contract name="getTestInfoCompletedOnDate">
	      <parameter order="1" id="1" name="COMPLETION_DT" type="STRING"/>
	      <step type="select" order="1" >
		<select fields="certifications.SCORECARD.TNSCID\,certifications.SCORECARD.TSSID\,certifications.SCORECARD.USERNAME\,certifications.SCORECARD.SCORE\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.SUBSERVID\,certifications.SCORECARD.CERT_SENT\,certifications.SCORECARD.CERT_FETCHED"/>
		<where field="certifications.SCORECARD.COMPLETION_DT" parameter="COMPLETION_DT"/>
	      </step>
	    </contract>

	    <!--
	      Contract : isTestPublished
	      Query : SELECT TSSID FROM SCORECARD WHERE TSSID = :tssid AND PUBLISH_NAUK = :publishNauk
	    -->
	    <contract name="isTestPublished">
	      <parameter order="1" id="1" name="TSSID" type="INT"/>
	      <parameter order="2" id="2" name="PUBLISH_NAUK" type="STRING" value="Y"/>
	      <step type="select" order="1" >
		<select fields="certifications.SCORECARD.TSSID"/>
		<where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
		<where field="certifications.SCORECARD.PUBLISH_NAUK" parameter="PUBLISH_NAUK"/>
	      </step>
	    </contract>
		   <contract name="getCountOfTestCompleted">
			<parameter order="1" id="1" name="USERNAME" type="STRING"/>
			<parameter order="2" id="2" name="PUBLISH_NAUK" type="STRING" value="Y"/>
                        <step type="select" order="1" >
                                <select fields="certifications.SCORECARD.@count(1)"/>
                                <where field="certifications.SCORECARD.USERNAME" parameter="USERNAME"/>
                                <where field="certifications.SCORECARD.PUBLISH_NAUK" parameter="PUBLISH_NAUK"/>
                        </step>
                </contract>     
		   <contract name="getAllTestDetails">
                        <parameter order="1" id="1" name="USERNAME" type="STRING"/>
                        <parameter order="2" id="2" name="PUBLISH_NAUK" type="STRING" value="Y"/>
                        <parameter order="3" id="3" name="PR_FETCHED" type="STRING" value="Y"/>
                        <parameter order="4" id="4" name="JREP_FETCHED" type="STRING" value="Y"/>
                        <step type="select" order="1" >
                                <select fields="certifications.SCORECARD.SCORE\,certifications.SCORECARD.SUBSERVID\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.TSSID\,certifications.SCORECARD.COMPLETION_DT\,resbilling.SUBSERVICE.NAME"/>
				<!--
                                <select fields="certifications.SCORECARD.SCORE\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.TSSID\,certifications.SCORECARD.COMPLETION_DT\,certifications.PCNT_PCNTL_MAP.PERCENTILE"/>
				-->
                                <!--<select fields="certifications.SCORECARD.SCORE\,certifications.SCORECARD.SUBSERVID\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.TSSID\,certifications.SCORECARD.COMPLETION_DT\,certifications.PCNT_PCNTL_MAP.PERCENTILE\,resbilling.SUBSERVICE.NAME"/>-->
                                <where field="certifications.SCORECARD.USERNAME" parameter="USERNAME"/>
                                <where field="certifications.SCORECARD.PUBLISH_NAUK" parameter="PUBLISH_NAUK"/>
                                <where field="certifications.SCORECARD.PR_FETCHED" parameter="PR_FETCHED"/>
                                <where field="certifications.SCORECARD.JREP_FETCHED" parameter="JREP_FETCHED"/>
				<post-part data-store="certifications.SCORECARD" value=" order by SCORE desc"/>
                        </step>
                </contract>
		<contract name="getTestLabel">
                        <parameter order="1" id="1" name="USERNAME" type="STRING"/>
                        <parameter order="2" id="2" name="PUBLISH_NAUK" type="STRING" value="Y"/>
                        <step type="select" order="1" >
                                <select fields="resbilling.SUBSERVICE.NAME\,resbilling.SUBSERVICE.SUBSERVID"/>
                                <where field="certifications.SCORECARD.USERNAME" parameter="USERNAME"/>
                                <where field="certifications.SCORECARD.PUBLISH_NAUK" parameter="PUBLISH_NAUK"/>
                        </step>
                </contract>
		<contract name="viewProctoringReport">
   			                <parameter order="1" id="1" name="TSSID" type="INT"/>
                        <step type="select" order="1" >
                                <select fields="certifications.REPORTS.PROCTOR"/>
                                <where field="certifications.REPORTS.TSSID" parameter="TSSID"/>
                        </step>
                </contract>

		<!--
			1) getScore()                      //SCORECARD
 		 	Input : TSSID
		 	Output: SCORE
		  	Query : SELECT SCORE FROM SCORECARD WHERE TSSID=:tssid	
		-->
		<contract name="getScore">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.SCORE"/>
				<where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
			</step>
		</contract>
		<!--
			2) doesTranscriptExsist()                      //SCORECARD
			Input : TSNCID
			Output: TNSCID
			Query : SELECT TNSCID FROM SCORECARD WHERE TNSCID = :tnscid
		-->
		<contract name="doesTranscriptExsist">
			<parameter order="1" id="1" name="TNSCID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.TNSCID"/>
				<where field="certifications.SCORECARD.TNSCID" parameter="TNSCID"/>
			</step>
		</contract>

		<!--
			3) getSubServId()                      //SCORECARD
			Input : TSSID, TSNCID
  			Output: SUBSERVID
			Query : SELECT SUBSERVID FROM SCORECARD WHERE TSSID = :tssid AND TNSCID = :tnscid
		-->

		<contract name="getSubServId">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<parameter order="2" id="2" name="TNSCID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.SUBSERVID"/>
				<where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
				<where field="certifications.SCORECARD.TNSCID" parameter="TNSCID"/>
			</step>
		</contract>
		<!--
			4) getSubServIdByUsername()            //SCORECARD
			Input : TSSID, USERNAME
			Output: SUBSERVID
			Query : SELECT SUBSERVID FROM SCORECARD WHERE TSSID = :tssid AND USERNAME = :userName
		-->

		<contract name="getSubServIdByUsername">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<parameter order="2" id="2" name="USERNAME" type="STRING"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.SUBSERVID"/>
				<where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
				<where field="certifications.SCORECARD.USERNAME" parameter="USERNAME"/>
			</step>
		</contract>
		<!--
			5) scoreExists()                      //SCORECARD
			Input : TSSID
		  	Output: TSSID
		  	Query : SELECT TSSID FROM SCORECARD WHERE TSSID = :tssid	
		-->
		
		<contract name="scoreExists">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.TSSID"/>
				<where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
			</step>
		</contract>
		<!--
			6) getCertificateMissed()                      //SCORECARD
			Input : FROM, TO
			Output: Array of TNSCIDS indexed by COMPLETION_DT, i.e. Array(COMPLETION_DT1=>array(TNSCID1, TNSCID2,...), COMPLETION_DT2=>array(TNSCID3,...), ..)
			Query : SELECT TNSCID, COMPLETION_DT FROM SCORECARD WHERE CERT_FETCHED = 'N' AND COMPLETION_DT >= :from AND COMPLETION_DT <= :to ORDER BY COMPLETION_DT
		-->			
		<contract name="getCertificateMissed">
                        <parameter order="1" id="1" name="COMPLETION_DT_RANGE" type="STRINGRANGE"/>
                        <parameter order="2" id="2" name="CERT_FETCHED" type="STRING" value="N"/>
                        <step type="select" order="1" >
                                 <select fields="certifications.SCORECARD.TNSCID\,certifications.SCORECARD.COMPLETION_DT"/>
                                <where field="certifications.SCORECARD.COMPLETION_DT" parameter="COMPLETION_DT_RANGE"/>
                                <where field="certifications.SCORECARD.CERT_FETCHED" parameter="CERT_FETCHED"/>
                        </step>
                </contract>
	

		<!--
			7) getProctorReportsMissed()                      //SCORECARD
			Input : FROM, TO
			Output: Array f TNSCIDS indexed by COMPLETION_DT, i.e. Array(COMPLETION_DT1=>array(TNSCID1, TNSCID2,...), COMPLETION_DT2=>array(TNSCID3,...), ..)
			Query : SELECT TNSCID, COMPLETION_DT FROM SCORECARD WHERE PR_FETCHED = 'N' AND COMPLETION_DT >= :from AND COMPLETION_DT <= :to ORDER BY COMPLETION_DT;
		-->
		<contract name="getProctorReportsMissed">
                        <parameter order="1" id="1" name="COMPLETION_DT_RANGE" type="STRINGRANGE"/>
                        <parameter order="2" id="2" name="PR_FETCHED" type="STRING" value="N"/>
                        <step type="select" order="1" >
                                 <select fields="certifications.SCORECARD.TNSCID\,certifications.SCORECARD.COMPLETION_DT"/>
                                <where field="certifications.SCORECARD.COMPLETION_DT" parameter="COMPLETION_DT_RANGE"/>
                                <where field="certifications.SCORECARD.PR_FETCHED" parameter="PR_FETCHED"/>
                        </step>
                </contract>

		<!--
			8) tnscidsPresent()                      //SCORECARD, out of input TNSCIDs, how many are present in scorecard
	  		Input : Array of TNSCIDs
			Output: Array of TNSCIDs, may be a subset of input
			Query : SELECT TNSCID FROM SCORECARD WHERE TNSCID IN (:tnscids)
			NOT IMPLEMENTED
		-->
		<contract name="tnscidsPresent">
                        <parameter order="1" id="1" name="TNSCID" type="INTARRAY"/>
                        <step type="select" order="1" >
                                 <select fields="certifications.SCORECARD.TNSCID"/>
                                <where field="certifications.SCORECARD.TNSCID" parameter="TNSCID"/>
                        </step>
                </contract>



		<!--
			9) getTestScoreforSMS()                      //SCORECARD
 			Input : TSSID
			Output: 'TNSCID', 'SCORE', 'PERCENTAGE', 'COMPLETION_DT', 'PUBLISH_NAUK', 'PUBLISH_FN', 'PUBLISH_NAUK_DT'
		  	Query : SELECT TNSCID, SCORE, PERCENTAGE, COMPLETION_DT, PUBLISH_NAUK, PUBLISH_FN, PUBLISH_NAUK_DT FROM SCORECARD WHERE TSSID = :tssid 
		-->
		<contract name="getTestScoreforSMS">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.TNSCID\,certifications.SCORECARD.SCORE\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.COMPLETION_DT\,certifications.SCORECARD.PUBLISH_FN\,certifications.SCORECARD.PUBLISH_NAUK_DT\,certifications.SCORECARD.PUBLISH_NAUK"/>
				<!--<select fields="certifications.SCORECARD.TNSCID\,certifications.SCORECARD.SCORE\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.COMPLETION_DT\,certifications.SCORECARD.PUBLISH_NAUK\,certifications.SCORECARD.PUBLISH_FN\,certifications.SCORECARD.PUBLISH_NAUK_DT"/>-->
				<where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
			</step>
		</contract>
		<!--
			10) isProctorAvailable()                      // SCORECARD
  			Input : TSSID, USERNAME
			Output : 1/0
			Query : SELECT TSSID FROM REPORTS WHERE TSSID = :tssid AND (PROCTOR != NULL OR PROCTOR != '')
		-->

		<contract name="isProctorAvailable">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.REPORTS.TSSID"/>
				<!--<select fields="certifications.REPORTS.TSSID\,certifications.REPORTS.PROCTOR"/>-->
				<where field="certifications.REPORTS.TSSID" parameter="TSSID"/>
				<post-part data-store="certifications.REPORTS" value=" AND PROCTOR IS NOT NULL AND PROCTOR !='' "/>
			</step>
		</contract>
	
		<!--
			11) isCertificateAvailable()                      //SCORECARD
		  	Input : TSSID
			Output : 1/0
			Query : SELECT TSSID FROM CERTIFICATE WHERE TSSID = :tssid AND (CERTIFICATE != NULL OR CERTIFICATE != '')
		-->	
	
		<contract name="isCertificateAvailable">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.REPORTS.TSSID"/>
				<!--<select fields="certifications.REPORTS.TSSID\,certifications.REPORTS.CERTIFICATE"/>-->
				<where field="certifications.REPORTS.TSSID" parameter="TSSID"/>
				<post-part data-store="certifications.REPORTS" value=" AND CERTIFICATE IS NOT NULL AND CERTIFICATE !='' "/>
			</step>
		</contract>
		<!--
			12) getPcntlFromTest()                           //PCNT_PCNTL_MAP
	  		Input : TSSID
			Output: PERCENTILE
			Query : SELECT PERCENTILE FROM SCORECARD S, PCNT_PCNTL_MAP P WHERE S.SUBSERVID=P.SUBSERVID AND S.PERCENTAGE=P.PERCENTAGE AND S.TSSID = :tssid
		-->
		<contract name="getPcntlFromTest">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.PCNT_PCNTL_MAP.PERCENTILE"/>
				<where field="certifications.SCORECARD.TSSID" parameter="TSSID"/>
			</step>
		</contract>

		<!--
			13) getPcntl()                           //PCNT_PCNTL_MAP
 			Input : SUBSERVID, PERCENTAGE
			Output: PERCENTILE
			Query : SELECT PERCENTILE FROM SCORECARD WHERE SUBSERVID = :subservid AND PERCENTAGE = :percentage

		-->
		<contract name="getPcntl">
			<parameter order="1" id="1" name="SUBSERVID" type="INT"/>
			<parameter order="2" id="2" name="PERCENTAGE" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.PCNT_PCNTL_MAP.PERCENTILE"/>
				<where field="certifications.PCNT_PCNTL_MAP.SUBSERVID" parameter="SUBSERVID"/>
				<where field="certifications.PCNT_PCNTL_MAP.PERCENTAGE" parameter="PERCENTAGE"/>
			</step>
		</contract>
		<!--
			14) getCertificate()                      // REPORTS
	  		Input : TSSID
  			Output: CERTIFICATE
  			Query : SELECT CERTIFICATE FROM REPORTS WHERE TSSID = :tssid
		-->

		<contract name="getCertificate">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.REPORTS.CERTIFICATE"/>
				<where field="certifications.REPORTS.TSSID" parameter="TSSID"/>
			</step>
		</contract>
		<!--
			15) getProctorReport()                    // REPORTS
  			Input : TSSID
			Output: PROCTOR
			Query : SELECT PROCTOR FROM REPORTS WHERE TSSID = :tssid
		-->
		
		<contract name="getProctorReport">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.REPORTS.PROCTOR"/>
				<where field="certifications.REPORTS.TSSID" parameter="TSSID"/>
			</step>
		</contract>

		<!--
			16) pcntlExists()                           //PCNT_PCNTL_MAP
  			Input : SUBSERVID, TESTID, PERCENTAGE
  			Output: 1/0
  			Query : SELECT SUBSERVID FROM PCNT_PCNTL_MAP WHERE SUBSERVID = :subservid AND TESTID = :testid AND PERCENTAGE = :percentage
		-->

		<contract name="pcntlExists">
			<parameter order="1" id="1" name="TESTID" type="INT"/>
			<parameter order="2" id="2" name="SUBSERVID" type="INT"/>
			<parameter order="3" id="3" name="PERCENTAGE" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.PCNT_PCNTL_MAP.PERCENTILE"/>
				<!--<select fields="certifications.PCNT_PCNTL_MAP.SUBSERVID"/>-->
				<where field="certifications.PCNT_PCNTL_MAP.TESTID" parameter="TESTID"/>
				<where field="certifications.PCNT_PCNTL_MAP.SUBSERVID" parameter="SUBSERVID"/>
				<where field="certifications.PCNT_PCNTL_MAP.PERCENTAGE" parameter="PERCENTAGE"/>
			</step>
		</contract>
		<!--
			17) getJobReportsMissed()                      //SCORECARD
			Input : FROM, TO
			Output: Array f TNSCIDS indexed by COMPLETION_DT, i.e. Array(COMPLETION_DT1=>array(TNSCID1, TNSCID2,...), COMPLETION_DT2=>array(TNSCID3,...), ..)
			Query : SELECT TNSCID, COMPLETION_DT FROM SCORECARD WHERE JREP_FETCHED = 'N' AND COMPLETION_DT >= :from AND COMPLETION_DT <= :to ORDER BY COMPLETION_DT;
		-->
		<contract name="getJobReportsMissed">
                        <parameter order="1" id="1" name="COMPLETION_DT_RANGE" type="STRINGRANGE"/>
                        <parameter order="2" id="2" name="JREP_FETCHED" type="STRING" value="N"/>
                        <step type="select" order="1" >
                                 <select fields="certifications.SCORECARD.TNSCID\,certifications.SCORECARD.COMPLETION_DT"/>
                                <where field="certifications.SCORECARD.COMPLETION_DT" parameter="COMPLETION_DT_RANGE"/>
                                <where field="certifications.SCORECARD.JREP_FETCHED" parameter="JREP_FETCHED"/>
                        </step>
                </contract>

		<!--
			15) getJobReport()                    // REPORTS
  			Input : TSSID
			Output: JOBREPORT
			Query : SELECT JOBREPORT FROM REPORTS WHERE TSSID = :tssid
		-->
		
		<contract name="getJobReport">
			<parameter order="1" id="1" name="TSSID" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.REPORTS.JOBREPORT"/>
				<where field="certifications.REPORTS.TSSID" parameter="TSSID"/>
			</step>
		</contract>



		<!--
		<contract name="a1">
			<parameter order="1" id="1" name="USERNAME" type="STRING"/>
			<parameter order="2" id="2" name="SERVICEID" type="STRING"/>
			<parameter order="3" id="3" name="SUBSERVEID" type="STRING" value="1"/>
			<step type="select" order="1" >
				<select fields="resbilling.TRANS_SUB_SERVICES.@count(1)\,resbilling.TRANS_SUB_SERVICES.TSSID"/>
				<where field="resbilling.CLIENTS.USERNAME" parameter="USERNAME"/>
				<where field="resbilling.TRANS_SERVICES.SERVICEID" parameter="SERVICEID"/>
				<where field="resbilling.TRANS_SUB_SERVICES.SUBSERVID" parameter="SUBSERVEID"/>
			</step>
			
		</contract>
		-->
		<!--
		<contract name="a5">
			<parameter order="1" id="1" name="SUBSERVEID" type="STRING"/>
			<step type="select" order="1" >
				<select fields="resbilling.TRANS_SUB_SERVICES.@count(1)"/>
				<where field="resbilling.TRANS_SUB_SERVICES.SUBSERVID" parameter="SUBSERVEID"/>
			</step>
		</contract>
		-->
		<!--	
		<contract name="a6">
			<parameter order="1" id="1" name="SUBSERVEID" type="STRING"/>
			<step type="select" order="1" >
				<select fields="resbilling.TRANS_SUB_SERVICES.@count(1)\,resbilling.TRANS_SUB_SERVICES.TSSID"/>
				<where field="resbilling.TRANS_SUB_SERVICES.SUBSERVID" parameter="SUBSERVEID"/>
			</step>
		</contract>
		-->



<!--		<contract name="a2">
			<parameter order="1" id="1" name="TESTNAME" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.SCORE\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.AVG_SCORE"/>
				<where field="certifications.SCORECARD.TSSID" parameter="1"/>
			</step>
		</contract>


		<contract name="a3">
			<parameter order="1" id="1" name="TESTNAME" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.SCORE\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.AVG_SCORE"/>
				<where field="resbilling.SUBSERVICE.SUBSERVID" parameter="1"/>
			</step>
		</contract>

		<contract name="a4">
			<parameter order="1" id="1" name="TESTNAME" type="INT"/>
			<step type="select" order="1" >
				<select fields="certifications.SCORECARD.SCORE\,certifications.SCORECARD.PERCENTAGE\,certifications.SCORECARD.AVG_SCORE"/>
				<where field="resbilling.SUBSERVICE.SUBSERVID" parameter="1"/>
			</step>
		</contract>

-->
		<!--
		<contract name="M2">
			<parameter order="1" id="1" name="IND" type="STRING"/>
			<step type="select" order="1" >
				<select fields="a.t_1.f13\,a.t_1.f11\,a.t_2.f22"/>
				<where field="a.t_1.f11" parameter="1"/>
			</step>
		</contract>
-->
	</contracts>
	<max-concurrancy>60</max-concurrancy>
	<connection>
	    <socket type="morbid" timeoutms="3000"/>
	    <allowed-host request-type="execute-strategy">127.0.0.1</allowed-host>
    	    <allowed-host request-type="ping">127.0.0.1</allowed-host>
    	    <allowed-host request-type="status">127.0.0.1</allowed-host>
	    <allowed-host request-type="execute-strategy">172.16.3.212</allowed-host>
    	    <allowed-host request-type="ping">172.16.3.212</allowed-host>
    	    <allowed-host request-type="status">172.16.3.212</allowed-host>
	    <allowed-host request-type="execute-strategy">172.16.3.213</allowed-host>
    	    <allowed-host request-type="ping">172.16.3.213</allowed-host>
    	    <allowed-host request-type="status">172.16.3.213</allowed-host>
	    <allowed-host request-type="execute-strategy">172.16.3.214</allowed-host>
    	    <allowed-host request-type="ping">172.16.3.214</allowed-host>
    	    <allowed-host request-type="status">172.16.3.214</allowed-host>
	    <allowed-host request-type="execute-strategy">172.16.3.216</allowed-host>
            <allowed-host request-type="ping">172.16.3.216</allowed-host>
            <allowed-host request-type="status">172.16.3.216</allowed-host>
	

       </connection>
	
</services>
